{"mappings":"qhBACA,IAAAA,EAAAC,EAAA,SCDA,GAAqB,oBAAXC,OACR,IAAIC,EAAMD,OAAOE,SAEbD,EAAMF,EAAA,SASZ,SAASI,EAAMC,EAAIC,GAAKA,EAAGC,MACvBF,EAAGG,KAPHC,YAOiBJ,EAAGK,KACnBC,KAAKC,KACTD,KAAKC,IAAIC,KAAKR,EAAGS,IAAKT,EAAGU,KAAK,WAAYC,QAAQC,IAAI,4EAA6EC,KAAKC,GAAGC,S,IAP5IlB,EAAImB,MAAMT,IAAM,SAASU,EAAIC,EAAKC,GACjC,OAAOb,KAAKI,IAAIX,EAAO,CAACQ,IAAKU,G,mBDJ9BN,QAAQC,IAAI,YAEZ,MAAMQ,EAAU,yEA0ChB,SAASC,EAAcC,GAGrB,MAAMC,EAAQC,SAASC,eAAeH,GACtC,IAAKC,EAAO,MAAMG,MAAM,UAAUJ,oBAElC,OAAOC,EAAMI,K,CAGf,SAASC,EAAgBN,GAGvB,MAAMC,EAAQC,SAASC,eAAeH,GACtC,IAAKC,EAAO,MAAMG,MAAM,UAAUJ,oBAElCC,EAAMI,MAAQ,E,CAGhB,SAASE,EAAiBC,GACxB,IAEEN,SAASC,eAAe,YAAYM,WAAa,GAAGD,MAEpDN,SAASC,eAAe,YAAYO,MAAMC,QAAU,OAC9C,CAAN,MAAM,C,CAEV,SAASC,IACP,IAEEV,SAASC,eAAe,YAAYM,UAAY,GAEhDP,SAASC,eAAe,YAAYO,MAAMC,QAAU,MAC9C,CAAN,MAAM,C,CAvEVrC,OAAOuC,MAAQ,KACbxB,QAAQC,IAAI,UAEZ,MAAMwB,EAAYC,EAAAC,GAAOC,MAAMC,cACzBC,EAASpB,EAAa,UACtBqB,EAAUrB,EAAa,QACvBsB,EAAOtB,EAAa,QAEpBuB,GAAgBxB,EAAWyB,KAAKF,GAatC,GAZIC,GACFf,EAAgB,iBAGbY,GACHZ,EAAgB,4BAGba,GACHb,EAAgB,0BAGba,GAAYD,IAAUG,EAe3B,OAbAV,IAEAxC,EAAAoD,IAAIpC,IAAI,UAAUA,IAAIgC,GAASrC,IAAI,C,UACjC+B,E,OACAK,E,QACAC,E,KACAC,IAGFf,EAAe,UACfA,EAAe,QACfA,EAAe,SAER,CAAK,EAuCdhC,OAAOmD,kBAAoBb","sources":["criar.js","node_modules/gun/lib/not.js"],"sourcesContent":["// @ts-check\r\nimport { app } from './gun'\r\nimport 'gun/lib/not'\r\nimport moment from 'moment'\r\n\r\nconsole.log('criar.js')\r\n\r\nconst linkValido = /^(https?:\\/\\/)?chat\\.whatsapp\\.com\\/(?:invite\\/)?([a-zA-Z0-9_-]{22,})$/\r\n\r\n// @ts-ignore\r\nwindow.criar = () => {\r\n  console.log('chamou')\r\n\r\n  const criado_em = moment.utc().toISOString()\r\n  const cidade = getValueById('cidade')\r\n  const criador = getValueById('nome')\r\n  const link = getValueById('link')\r\n\r\n  const linkInvalido = !linkValido.test(link)\r\n  if (linkInvalido) {\r\n    mostrarMensagem('link inválido')\r\n  }\r\n\r\n  if (!cidade) {\r\n    mostrarMensagem('campo cidade obrigatório')\r\n  }\r\n\r\n  if (!criador) {\r\n    mostrarMensagem('campo nome obrigatório')\r\n  }\r\n\r\n  if (!criador || !cidade || linkInvalido) return\r\n\r\n  esconderMensagens()\r\n\r\n  app.get('grupos').get(criador).put({\r\n    criado_em,\r\n    cidade,\r\n    criador,\r\n    link\r\n  })\r\n\r\n  clearValueById('cidade')\r\n  clearValueById('nome')\r\n  clearValueById('link')\r\n\r\n  return false\r\n}\r\n\r\nfunction getValueById (id) {\r\n  /** @type { HTMLInputElement } */\r\n  // @ts-ignore\r\n  const input = document.getElementById(id)\r\n  if (!input) throw Error(`Input #${id} não encontrado`)\r\n\r\n  return input.value\r\n}\r\n\r\nfunction clearValueById (id) {\r\n  /** @type { HTMLInputElement } */\r\n  // @ts-ignore\r\n  const input = document.getElementById(id)\r\n  if (!input) throw Error(`Input #${id} não encontrado`)\r\n\r\n  input.value = ''\r\n}\r\n\r\nfunction mostrarMensagem (mensagem) {\r\n  try {\r\n    // @ts-ignore\r\n    document.getElementById('mensagem').innerText += `${mensagem}\\n`\r\n    // @ts-ignore\r\n    document.getElementById('mensagem').style.display = 'block'\r\n  } catch {}\r\n}\r\nfunction esconderMensagens () {\r\n  try {\r\n    // @ts-ignore\r\n    document.getElementById('mensagem').innerText = ''\r\n    // @ts-ignore\r\n    document.getElementById('mensagem').style.display = 'none'\r\n  } catch {}\r\n}\r\n\r\n// @ts-ignore\r\nwindow.esconderMensagens = esconderMensagens\r\n","if(typeof window !== \"undefined\"){\n  var Gun = window.Gun;\n} else { \n  var Gun = require('../gun');\n}\n\nvar u;\n\nGun.chain.not = function(cb, opt, t){\n\treturn this.get(ought, {not: cb});\n}\n\nfunction ought(at, ev){ ev.off();\n\tif(at.err || (u !== at.put)){ return }\n\tif(!this.not){ return }\n\tthis.not.call(at.gun, at.get, function(){ console.log(\"Please report this bug on https://gitter.im/amark/gun and in the issues.\"); need.to.implement; });\n}"],"names":["$e6b5y","parcelRequire","window","$4f588d95f373ac78$var$Gun","Gun","$4f588d95f373ac78$var$ought","at","ev","off","err","$4f588d95f373ac78$var$u","put","this","not","call","gun","get","console","log","need","to","implement","chain","cb","opt","t","$698cac0f70ed5795$var$linkValido","$698cac0f70ed5795$var$getValueById","id","input","document","getElementById","Error","value","$698cac0f70ed5795$var$clearValueById","$698cac0f70ed5795$var$mostrarMensagem","mensagem","innerText","style","display","$698cac0f70ed5795$var$esconderMensagens","criar","criado_em","$parcel$interopDefault","$45fvw","utc","toISOString","cidade","criador","link","linkInvalido","test","app","esconderMensagens"],"version":3,"file":"criar.f48a33ff.js.map"}